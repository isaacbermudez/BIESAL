---
import Info from "../cards/Info.astro";
import Container from "../shared/Container.astro";
import Paragraph from "../shared/Paragraph.astro";
import Title from "../shared/Title.astro";
import { faqs } from '../../utils/data';

---

<section id="faqs">
    <Container className="flex flex-col midmd:flex-row gap-10 lg:gap-12">
        
        <div class="flex-1 flex midmd:w-7/12 lg:w-1/2 flex-col justify-center">
            
            <Title>
                Preguntas Frecuentes (FAQs)
            </Title>

            <Paragraph className="mt-6 mb-8 text-lg">
                Resolvemos las dudas más importantes sobre la inversión, la tecnología y el proceso de implementación de su nuevo ecosistema digital integrado 
                <span
          class="text-transparent bg-clip-text bg-gradient-to-br from-indigo-600 from-20% via-primary via-30% to-green-600"
          ><strong>BIESAL</strong></span>.
            </Paragraph>
            
            </div>

        <div class="max-w-md mx-auto midmd:max-w-none lg:mx-0 lg:pr-10 xl:pr-2 flex-1 flex w-11/12 midmd:w-5/12 lg:w-1/2 midmd:h-auto items-center">
            <div class="w-full relative">
                
                <div class="absolute rotate-45 -left-5 md:-left-10 lg:-left-20 xl:-left-24 p-1 top-1/2 w-16 h-16 bg-gradient-to-br from-primary to-orange-400 blur-3xl opacity-50"></div>
                <div class="absolute p-1 -top-4 md:-top-10 right-0 w-20 h-20 bg-gradient-to-br from-primary to-orange-400 rounded-full blur-3xl opacity-60"></div>
                
                <div class="flex flex-col gap-4 relative z-10">
                    {faqs.map((faq) => (
                        <details class="p-4 rounded-xl border border-box-border bg-box-bg shadow-lg transition-all duration-300">
                            
                            <summary class="flex items-center justify-between cursor-pointer text-lg font-semibold text-heading-1 hover:text-primary transition-colors">
                                {faq.question}
                                <svg class="h-5 w-5 shrink-0 transition-transform duration-300" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5" />
                                </svg>
                            </summary>
                            
                            <Paragraph className="mt-4 border-t border-box-border pt-4 text-sm" set:html={faq.answer} />
                        </details>
                    ))}
                </div>

            </div>
        </div>

    </Container>
</section>

<script>
    // Script para hacer que el ícono de la flecha en <details> rote
    document.addEventListener('DOMContentLoaded', () => {
        const detailsElements = document.querySelectorAll('details');
        
        detailsElements.forEach(details => {
            const summary = details.querySelector('summary');
            const icon = summary.querySelector('svg');

            // Función para actualizar la rotación del ícono
            const updateIconRotation = () => {
                if (details.open) {
                    icon.style.transform = 'rotate(180deg)';
                } else {
                    icon.style.transform = 'rotate(0deg)';
                }
            };

            // Inicializar la rotación al cargar
            updateIconRotation();

            // Escuchar el evento de toggle (abrir/cerrar)
            details.addEventListener('toggle', updateIconRotation);
        });
    });
</script>

<style>
    /* Estilo para ocultar la barra de scroll en el modal sin afectar la funcionalidad */
    .scrollbar-hide::-webkit-scrollbar {
        display: none;
    }
    .scrollbar-hide {
        -ms-overflow-style: none;
        scrollbar-width: none;
    }

    /* Estilo para manejar la rotación inicial de la flecha en caso de que un <details> esté abierto por defecto */
    details[open] summary svg {
        transform: rotate(180deg);
    }
</style>