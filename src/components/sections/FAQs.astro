---
import Info from "../cards/Info.astro";
import Container from "../shared/Container.astro";
import Paragraph from "../shared/Paragraph.astro";
import Title from "../shared/Title.astro";
import { faqs } from "../../utils/data";
---

<section id="faqs">
  <Container className="flex flex-col gap-10 lg:gap-12 mb-6">
    <!-- Text Section - Full Width -->
    <div class="flex flex-col items-center text-center max-w-3xl mx-auto">
      <Title> Preguntas Frecuentes (FAQs) </Title>

      <Paragraph className="mt-6 mb-6 text-lg">
        Resolvemos las dudas más importantes sobre la inversión, la tecnología y
        el proceso de implementación de su nuevo ecosistema digital integrado
        <span
          class="text-transparent bg-clip-text bg-gradient-to-br from-indigo-600 from-20% via-primary via-30% to-green-600"
          ><strong>BIESAL</strong></span
        >.
      </Paragraph>
    </div>

    <!-- FAQs Section - Full Width with Professional Layout -->
    <div class="relative w-full max-w-4xl mx-auto">
      <!-- Decorative Elements -->
      <div
        class="absolute rotate-45 -left-5 md:-left-10 lg:-left-20 p-1 top-1/4 w-16 h-16 bg-gradient-to-br from-primary to-orange-400 blur-3xl opacity-50"
      >
      </div>
      <div
        class="absolute p-1 -top-4 md:-top-10 right-0 w-20 h-20 bg-gradient-to-br from-primary to-orange-400 rounded-full blur-3xl opacity-60"
      >
      </div>
      <div
        class="absolute rotate-12 -right-5 md:-right-10 bottom-1/4 p-1 w-16 h-16 bg-gradient-to-br from-indigo-600 to-primary blur-3xl opacity-40"
      >
      </div>

      <!-- FAQ Grid -->
      <div
        class="grid grid-cols-1 md:grid-cols-2 gap-4 lg:gap-6 relative z-10 md:items-start"
      >
        {
          faqs.map((faq) => (
            <details class="p-5 rounded-xl border border-box-border bg-box-bg shadow-lg hover:shadow-xl transition-all duration-300 hover:border-primary/30 h-fit">
              <summary class="flex items-start justify-between cursor-pointer text-base lg:text-lg font-semibold text-heading-1 hover:text-primary transition-colors group">
                <span class="pr-4">{faq.question}</span>
                <svg
                  class="h-5 w-5 shrink-0 transition-transform duration-300 group-open:rotate-180 mt-0.5"
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke-width="1.5"
                  stroke="currentColor"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M19.5 8.25l-7.5 7.5-7.5-7.5"
                  />
                </svg>
              </summary>

              <Paragraph
                className="mt-4 border-t border-box-border pt-4 text-sm leading-relaxed"
                set:html={faq.answer}
              />
            </details>
          ))
        }
      </div>
    </div>
  </Container>
</section>

<script>
  // Script para hacer que el ícono de la flecha en <details> rote
  document.addEventListener("DOMContentLoaded", () => {
    const detailsElements = document.querySelectorAll("details");

    detailsElements.forEach((details) => {
      const summary = details.querySelector("summary");
      const icon = summary.querySelector("svg");

      // Función para actualizar la rotación del ícono
      const updateIconRotation = () => {
        if (details.open) {
          icon.style.transform = "rotate(180deg)";
        } else {
          icon.style.transform = "rotate(0deg)";
        }
      };

      // Inicializar la rotación al cargar
      updateIconRotation();

      // Escuchar el evento de toggle (abrir/cerrar)
      details.addEventListener("toggle", updateIconRotation);
    });
  });
</script>

<style>
  /* Estilo para ocultar la barra de scroll en el modal sin afectar la funcionalidad */
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  /* Estilo para manejar la rotación inicial de la flecha en caso de que un <details> esté abierto por defecto */
  details[open] summary svg {
    transform: rotate(180deg);
  }
</style>
